<?phpif (!defined("__BOOTFILE__")) { die("Direct access is not allowed!"); }class Url{	/**	* Parse the URL to load the appropriate controller and its action	* WARNING: Running this function in an AJAX request may result in an error	* Define  __AJAXFILE__  to  true  in order to bypass this function!!!	*/	public static function parse() {		if (!preg_match("/^([0-9a-zA-Z]+)?(\/[0-9a-zA-Z]+)?$/", $_GET['p'])) { die("Failed to parse URL: Invalid URL!"); }		// Split the variable  p  from the URL and check if the splited values are empty or not (1st value = CONTROLLER | 2nd value = ACTION)		$PATH = @explode("/", $_GET['p']);		$CONTROLLER = ($PATH[0] != '') ? ($PATH[0]) : (Config::read('default.controller'));			$ACTION = ($PATH[1] != '') ? ($PATH[1]) : (Config::read('default.action'));				$PAGES_PATH = (isset($_GET['f'])) ? (ROOT_PATH . "/" . $_GET['f']) : (PAGES_PATH);				// Does the controller file exist?		if (!file_exists($PAGES_PATH . "/" . strtolower($CONTROLLER) . ".php")) { die("Controller file <b>" . $CONTROLLER . "</b> does not exist!"); }		include_once($PAGES_PATH . "/" . strtolower($CONTROLLER) . ".php");        				// Does the controller class exist?		if (!class_exists("P" . ucfirst($CONTROLLER))) { die("Controller class <b>P" . ucfirst($CONTROLLER) . "</b> does not exist!"); }		$CONTROLLER = "P" . ucfirst($CONTROLLER);		$CONTROLLER = new $CONTROLLER;		// Does the action function exist inside our controller class?		if (!method_exists($CONTROLLER, "action" . ucfirst($ACTION))) { die("Action <b>action" . ucfirst($ACTION) . "</b> does not exist!"); }				call_user_func(array($CONTROLLER, "action" . ucfirst($ACTION)));	}        public static function redirect($URL) {        //die(header("Location: " . $URL));		$string = '<script type="text/javascript">';		$string .= 'window.location = "' . $URL . '"';		$string .= '</script>';			echo $string;    }        public static function msg($URL, $MESSAGE, $REFRESH_TIME = 2)	{		header ("refresh:" . (int)$REFRESH_TIME . ";url=" . $URL);				die("<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">			 <html xmlns=\"http://www.w3.org/1999/xhtml\">			 <head>			 <meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\" />			 <title>ProsPantheon redirecing...</title>			 <div style='padding:20px; font:14px Verdana;'>" . $MESSAGE . "			 <br/><div style='color:#888; font:11px Verdana; cursor:default;'>			 Please wait, you are being redirected...			 </div></div>			 </body>			 </html>");	}}?>